/*! For license information please see core-global-search.js.LICENSE.txt */
(()=>{"use strict";var e,r={37139:(e,r,i)=>{var n=i(17499),a=i(77958),s=i(31352),l=i(20144),o=i(62642),c=i(85989),d=i(73567);const A={name:"AccountCircleIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}};var u=i(51900);const p=(0,u.Z)(A,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon account-circle-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M12,19.2C9.5,19.2 7.29,17.92 6,16C6.03,14 10,12.9 12,12.9C14,12.9 17.97,14 18,16C16.71,17.92 14.5,19.2 12,19.2M12,5A3,3 0 0,1 15,8A3,3 0 0,1 12,11A3,3 0 0,1 9,8A3,3 0 0,1 12,5M12,2A10,10 0 0,0 2,12A10,10 0 0,0 12,22A10,10 0 0,0 22,12C22,6.47 17.5,2 12,2Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports,h={name:"CalendarRangeIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},g=(0,u.Z)(h,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon calendar-range-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M9,10H7V12H9V10M13,10H11V12H13V10M17,10H15V12H17V10M19,3H18V1H16V3H8V1H6V3H5C3.89,3 3,3.9 3,5V19A2,2 0 0,0 5,21H19A2,2 0 0,0 21,19V5A2,2 0 0,0 19,3M19,19H5V8H19V19Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports;var m=i(37008),C=i(6136);const v={name:"CustomDateRangeModal",components:{NcButton:o.Z,NcModal:C.Z,CalendarRangeIcon:g,NcDateTimePicker:m.Z},props:{isOpen:{type:Boolean,required:!0}},data:()=>({dateFilter:{startFrom:null,endAt:null}}),computed:{isModalOpen:{get(){return this.isOpen},set(t){this.$emit("update:is-open",t)}}},methods:{closeModal(){this.isModalOpen=!1},applyCustomRange(){this.$emit("set:custom-date-range",this.dateFilter),this.closeModal()}}};var f=i(93379),b=i.n(f),_=i(7795),y=i.n(_),x=i(90569),k=i.n(x),w=i(3565),I=i.n(w),M=i(19216),S=i.n(M),F=i(44589),D=i.n(F),B=i(15094),Z={};Z.styleTagTransform=D(),Z.setAttributes=I(),Z.insert=k().bind(null,"head"),Z.domAPI=y(),Z.insertStyleElement=S(),b()(B.Z,Z),B.Z&&B.Z.locals&&B.Z.locals;const N=(0,u.Z)(v,(function(){var t=this,e=t._self._c;return t.isModalOpen?e("NcModal",{attrs:{id:"global-search",name:t.t("core","Date range filter"),show:t.isModalOpen,size:"small","clear-view-delay":0,title:t.t("Date range filter")},on:{"update:show":function(e){t.isModalOpen=e},close:t.closeModal}},[e("div",{staticClass:"global-search-custom-date-modal"},[e("h1",[t._v(t._s(t.t("core","Date range filter")))]),t._v(" "),e("div",{staticClass:"global-search-custom-date-modal__pickers"},[e("NcDateTimePicker",{attrs:{id:"globalsearch-custom-date-range-start",max:new Date,label:t.t("core","Pick start date"),type:"date"},model:{value:t.dateFilter.startFrom,callback:function(e){t.$set(t.dateFilter,"startFrom",e)},expression:"dateFilter.startFrom"}}),t._v(" "),e("NcDateTimePicker",{attrs:{id:"globalsearch-custom-date-range-end",max:new Date,label:t.t("core","Pick end date"),type:"date"},model:{value:t.dateFilter.endAt,callback:function(e){t.$set(t.dateFilter,"endAt",e)},expression:"dateFilter.endAt"}})],1),t._v(" "),e("NcButton",{on:{click:t.applyCustomRange},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarRangeIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3084610734)},[t._v("\n\t\t\t"+t._s(t.t("core","Apply range"))+"\n\t\t\t")])],1)]):t._e()}),[],!1,null,"0afd0926",null).exports,L={name:"DotsHorizontalIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},j=(0,u.Z)(L,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon dots-horizontal-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M16,12A2,2 0 0,1 18,10A2,2 0 0,1 20,12A2,2 0 0,1 18,14A2,2 0 0,1 16,12M10,12A2,2 0 0,1 12,10A2,2 0 0,1 14,12A2,2 0 0,1 12,14A2,2 0 0,1 10,12M4,12A2,2 0 0,1 6,10A2,2 0 0,1 8,12A2,2 0 0,1 6,14A2,2 0 0,1 4,12Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports,R={name:"CloseThickIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},z={name:"SearchFilterChip",components:{CloseIcon:(0,u.Z)(R,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon close-thick-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M20 6.91L17.09 4L12 9.09L6.91 4L4 6.91L9.09 12L4 17.09L6.91 20L12 14.91L17.09 20L20 17.09L14.91 12L20 6.91Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports},props:{text:String,pretext:String},methods:{deleteChip(){this.$emit("delete",this.filter)}}};var P=i(1233),G={};G.styleTagTransform=D(),G.setAttributes=I(),G.insert=k().bind(null,"head"),G.domAPI=y(),G.insertStyleElement=S(),b()(P.Z,G),P.Z&&P.Z.locals&&P.Z.locals;const E=(0,u.Z)(z,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"chip"},[e("span",{staticClass:"icon"},[t._t("icon"),t._v(" "),t.pretext.length?e("span",[t._v(" "+t._s(t.pretext)+" : ")]):t._e()],2),t._v(" "),e("span",{staticClass:"text"},[t._v(t._s(t.text))]),t._v(" "),e("span",{staticClass:"close-icon",on:{click:t.deleteChip}},[e("CloseIcon",{attrs:{size:16}})],1)])}),[],!1,null,"4932c3f9",null).exports,T={name:"ListBoxIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},O=(0,u.Z)(T,(function(){var t=this,e=t._self._c;return e("span",t._b({staticClass:"material-design-icon list-box-icon",attrs:{"aria-hidden":!t.title,"aria-label":t.title,role:"img"},on:{click:function(e){return t.$emit("click",e)}}},"span",t.$attrs,!1),[e("svg",{staticClass:"material-design-icon__svg",attrs:{fill:t.fillColor,width:t.size,height:t.size,viewBox:"0 0 24 24"}},[e("path",{attrs:{d:"M19 3H5C3.9 3 3 3.9 3 5V19C3 20.1 3.9 21 5 21H19C20.1 21 21 20.1 21 19V5C21 3.9 20.1 3 19 3M7 7H9V9H7V7M7 11H9V13H7V11M7 15H9V17H7V15M17 17H11V15H17V17M17 13H11V11H17V13M17 9H11V7H17V9Z"}},[t.title?e("title",[t._v(t._s(t.title))]):t._e()])])])}),[],!1,null,null,null).exports;var H=i(4888),Y=i(63357),V=i(22175),U=i(90941),Q=i(48741),W=i(19664),$=i(20296),X=i.n($),q=i(79753),J=i(93664),K=i(25108);async function tt(t){let{searchTerm:e}=t;const{data:{contacts:r}}=await J.Z.post((0,q.generateUrl)("/contactsmenu/contacts"),{filter:e});return r}var et=i(25108);const rt={name:"GlobalSearchModal",components:{AccountIcon:p,ArrowRight:d.default,CalendarRangeIcon:g,CustomDateRangeModal:N,DotsHorizontalIcon:j,FilterChip:E,ListBox:O,NcActions:H.Z,NcActionButton:Y.Z,NcButton:o.Z,NcEmptyContent:V.Z,NcModal:C.Z,NcListItem:Q.Z,NcSelect:W.Z,NcInputField:U.Z,MagnifyIcon:c.default},props:{isVisible:{type:Boolean,required:!0}},data(){return{providers:[],providerActionMenuIsOpen:!1,dateActionMenuIsOpen:!1,providerResultLimit:5,dateFilter:{id:"date",type:"date",text:"",startFrom:null,endAt:null},personFilter:{id:"person",type:"person",text:""},dateFilterIsApplied:!1,personFilterIsApplied:!1,filteredProviders:[],searchQuery:"",placesFilter:"",dateTimeFilter:null,filters:[],results:[],contacts:[],debouncedFind:X()(this.find,300),showDateRangeModal:!1}},computed:{peopleSeclectProps:{get(){return{userSelect:!0,label:t("core","People filter"),placeholder:t("core","Search people"),placement:"top",options:this.contacts,value:null}}}},mounted(){(async function(){try{const{data:t}=await J.Z.get((0,q.generateOcsUrl)("search/providers"),{params:{from:window.location.pathname.replace("/index.php","")+window.location.search}});if("ocs"in t&&"data"in t.ocs&&Array.isArray(t.ocs.data)&&t.ocs.data.length>0)return t.ocs.data}catch(t){K.error(t)}return[]})().then((t=>{this.providers=t,et.debug("Search providers",this.providers)})),tt({filter:""}).then((t=>{this.contacts=this.mapContacts(t),et.debug("Contacts",this.contacts)}))},methods:{find(t){if(0===t.length)return void(this.results=[]);const e=[],r=this.filteredProviders.length>0?this.filteredProviders:this.providers,i=(r,i)=>{const n={type:r.id,query:t,cursor:null};if(i.dateFilterIsApplied){if(!r.filters.since||!r.filters.until)return;n.since=this.dateFilter.startFrom,n.until=this.dateFilter.endAt}if(i.personFilterIsApplied){if(!r.filters.person)return;n.person=this.personFilter.id}this.providerResultLimit>5&&(n.limit=this.providerResultLimit),(0,function(t){let{type:e,query:r,cursor:i,since:n,until:a,limit:s,person:l}=t;const o=J.Z.CancelToken.source();return{request:async()=>J.Z.get((0,q.generateOcsUrl)("search/providers/{type}/search",{type:e}),{cancelToken:o.token,params:{term:r,cursor:i,since:n,until:a,limit:s,person:l,from:window.location.pathname.replace("/index.php","")+window.location.search}}),cancel:o.cancel}}(n).request)().then((t=>{e.push({id:r.id,provider:r.name,results:t.data.ocs.data.entries}),et.debug("New results",e),et.debug("Global search results:",this.results),this.updateResults(e)}))};r.forEach((t=>{const e=this.dateFilterIsApplied,r=this.personFilterIsApplied;i(t,{dateFilterIsApplied:e,personFilterIsApplied:r})}))},updateResults(t){let e=[...this.results];this.filters.length>0&&(e=e.filter((t=>this.filters.some((e=>e.id===t.id))))),t.forEach((t=>{const r=e.findIndex((e=>e.id===t.id));-1!==r?0===t.results.length?e.splice(r,1):e.splice(r,1,t):t.results.length>0&&e.push(t)}));const r=e.slice(0);r.sort(((t,e)=>{const r=this.providers.find((e=>e.id===t.id)),i=this.providers.find((t=>t.id===e.id));return(r?r.order:0)-(i?i.order:0)})),this.results=r},openResult(t){t.resourceUrl&&(window.location=t.resourceUrl)},mapContacts:t=>t.map((t=>({displayName:t.fullName,isNoUser:!1,subname:t.emailAddresses[0]?t.emailAddresses[0]:"",icon:"",user:t.id}))),filterContacts(t){tt({filter:t}).then((e=>{this.contacts=this.mapContacts(e),et.debug(`Contacts filtered by ${t}`,this.contacts)}))},applyPersonFilter(t){this.personFilterIsApplied=!0,this.personFilter.id=t.id,this.debouncedFind(this.searchQuery),et.debug("Person filter applied",t)},loadMoreResultsForProvider(t){this.providerResultLimit+=5,this.filters=this.filters.filter((t=>"provider"!==t.type));const e=this.providers.find((e=>e.id===t));this.addProviderFilter(e,!0)},addProviderFilter(t){let e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t.id&&(this.providerResultLimit=e?this.providerResultLimit:5,this.providerActionMenuIsOpen=!1,this.filteredProviders.find((e=>e.id===t.id))||this.filteredProviders.push({id:t.id,name:t.name,icon:t.icon,type:"provider"}),this.filters=this.syncProviderFilters(this.filters,this.filteredProviders),et.debug("Search filters (newly added)",this.filters),this.debouncedFind(this.searchQuery))},removeFilter(t){if("provider"===t.type){for(let e=0;e<this.filteredProviders.length;e++)if(this.filteredProviders[e].id===t.id){this.filteredProviders.splice(e,1);break}this.filters=this.syncProviderFilters(this.filters,this.filteredProviders),et.debug("Search filters (recently removed)",this.filters)}else for(let t=0;t<this.filters.length;t++)if("date"===this.filters[t].id){this.dateFilterIsApplied=!1,this.filters.splice(t,1);break}this.debouncedFind(this.searchQuery)},syncProviderFilters(t,e){const r=t.slice();return r.forEach(((t,i)=>{const n=t.id;"provider"===t.type&&(e.some((t=>t.id===n))||r.splice(i,1))})),e.forEach((t=>{const e=t.id;"provider"===t.type&&(r.some((t=>t.id===e))||r.push(t))})),r},updateDateFilter(){const t=this.filters.findIndex((t=>"date"===t.id));-1!==t?this.filters[t]=this.dateFilter:this.filters.push(this.dateFilter),this.dateFilterIsApplied=!0,this.debouncedFind(this.searchQuery)},applyQuickDateRange(e){this.dateActionMenuIsOpen=!1;const r=new Date;let i,n=r;switch(e){case"today":i=r,this.dateFilter.text=t("core","Today");break;case"7days":i=new Date(r),i.setDate(r.getDate()-7),this.dateFilter.text=t("core","Last 7 days");break;case"30days":i=new Date(r),i.setDate(r.getDate()-30),this.dateFilter.text=t("core","Last 30 days");break;case"thisyear":i=new Date(r.getFullYear(),0,1),this.dateFilter.text=t("core","This year");break;case"lastyear":i=new Date(r.getFullYear()-1,0,1),n=new Date(r.getFullYear()-1,11,31),this.dateFilter.text=t("core","Last year");break;case"custom":return void(this.showDateRangeModal=!0);default:return}this.dateFilter.startFrom=i,this.dateFilter.endAt=n,this.updateDateFilter()},setCustomDateRange(e){et.debug("Custom date range",e),this.dateFilter.startFrom=e.startFrom,this.dateFilter.endAt=e.endAt,this.dateFilter.text=t("core",`Between ${this.dateFilter.startFrom.toLocaleDateString()} and ${this.dateFilter.endAt.toLocaleDateString()}`),this.updateDateFilter()},isValidUrl:t=>/^https?:\/\//.test(t)||t.startsWith("//"),closeModal(){this.searchQuery=""}}};var it=i(46976),nt={};nt.styleTagTransform=D(),nt.setAttributes=I(),nt.insert=k().bind(null,"head"),nt.domAPI=y(),nt.insertStyleElement=S(),b()(it.Z,nt),it.Z&&it.Z.locals&&it.Z.locals;const at=(0,u.Z)(rt,(function(){var t=this,e=t._self._c;return t.isVisible?e("NcModal",{attrs:{id:"global-search",name:t.t("core","Global search"),show:t.isVisible,"clear-view-delay":0,title:t.t("Global search")},on:{"update:show":function(e){t.isVisible=e},close:t.closeModal}},[e("CustomDateRangeModal",{class:"global-search__date-range",attrs:{"is-open":t.showDateRangeModal},on:{"set:custom-date-range":t.setCustomDateRange,"update:is-open":function(e){t.showDateRangeModal=e}}}),t._v(" "),e("div",{ref:"globalSearch",staticClass:"global-search-modal"},[e("h1",[t._v(t._s(t.t("core","Global search")))]),t._v(" "),e("NcInputField",{attrs:{value:t.searchQuery,type:"text",label:t.t("core","Search apps, files, tags, messages...")},on:{"update:value":[function(e){t.searchQuery=e},t.debouncedFind]}}),t._v(" "),e("div",{staticClass:"global-search-modal__filters"},[e("NcActions",{attrs:{"menu-name":t.t("core","Apps and Settings"),open:t.providerActionMenuIsOpen},on:{"update:open":function(e){t.providerActionMenuIsOpen=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ListBox",{attrs:{size:20}})]},proxy:!0}],null,!1,708608415)},[t._v(" "),t._l(t.providers,(function(r){return e("NcActionButton",{key:r.id,on:{click:function(e){return t.addProviderFilter(r)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("img",{attrs:{src:r.icon}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t"+t._s(t.t("core",r.name))+"\n\t\t\t\t")])}))],2),t._v(" "),e("NcActions",{attrs:{"menu-name":t.t("core","Modified"),open:t.dateActionMenuIsOpen},on:{"update:open":function(e){t.dateActionMenuIsOpen=e}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("CalendarRangeIcon",{attrs:{size:20}})]},proxy:!0}],null,!1,3084610734)},[t._v(" "),e("NcActionButton",{on:{click:function(e){return t.applyQuickDateRange("today")}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("core","Today"))+"\n\t\t\t\t")]),t._v(" "),e("NcActionButton",{on:{click:function(e){return t.applyQuickDateRange("7days")}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("core","Last 7 days"))+"\n\t\t\t\t")]),t._v(" "),e("NcActionButton",{on:{click:function(e){return t.applyQuickDateRange("30days")}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("core","Last 30 days"))+"\n\t\t\t\t")]),t._v(" "),e("NcActionButton",{on:{click:function(e){return t.applyQuickDateRange("thisyear")}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("core","This year"))+"\n\t\t\t\t")]),t._v(" "),e("NcActionButton",{on:{click:function(e){return t.applyQuickDateRange("lastyear")}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("core","Last year"))+"\n\t\t\t\t")]),t._v(" "),e("NcActionButton",{on:{click:function(e){return t.applyQuickDateRange("custom")}}},[t._v("\n\t\t\t\t\t"+t._s(t.t("core","Custom date range"))+"\n\t\t\t\t")])],1),t._v(" "),e("NcSelect",t._b({on:{search:t.filterContacts,"option:selected":t.applyPersonFilter},model:{value:t.peopleSeclectProps.value,callback:function(e){t.$set(t.peopleSeclectProps,"value",e)},expression:"peopleSeclectProps.value"}},"NcSelect",t.peopleSeclectProps,!1))],1),t._v(" "),e("div",{staticClass:"global-search-modal__filters-applied"},t._l(t.filters,(function(r){return e("FilterChip",{key:r.id,attrs:{text:r.name??r.text,pretext:""},on:{delete:function(e){return t.removeFilter(r)}},scopedSlots:t._u([{key:"icon",fn:function(){return["person"===r.type?e("AccountIcon"):"date"===r.type?e("CalendarRangeIcon"):e("img",{attrs:{src:r.icon,alt:""}})]},proxy:!0}],null,!0)})})),1),t._v(" "),0===t.searchQuery.length?e("div",[e("NcEmptyContent",{attrs:{name:t.t("core","Start typing in search")},scopedSlots:t._u([{key:"icon",fn:function(){return[e("MagnifyIcon")]},proxy:!0}],null,!1,2498321595)})],1):t._e(),t._v(" "),t._l(t.results,(function(r){return e("div",{key:r.id,staticClass:"global-search-modal__results"},[e("div",{staticClass:"results"},[e("div",{staticClass:"result-title"},[e("span",[t._v(t._s(r.provider))])]),t._v(" "),e("ul",{staticClass:"result-items"},t._l(r.results,(function(r,i){return e("NcListItem",{key:i,staticClass:"result-items__item",attrs:{name:r.title??"",bold:!1},on:{click:function(e){return t.openResult(r)}},scopedSlots:t._u([{key:"icon",fn:function(){return[r.icon?e("div",{staticClass:"result-items__item-icon",class:{"result-items__item-icon--no-preview":!t.isValidUrl(r.thumbnailUrl),"result-items__item-icon--with-thumbnail":t.isValidUrl(r.thumbnailUrl),[r.icon]:!t.isValidUrl(r.icon)},style:{backgroundImage:t.isValidUrl(r.icon)?`url(${r.icon})`:""}},[r.thumbnailUrl?e("img",{attrs:{src:r.thumbnailUrl}}):t._e()]):t._e()]},proxy:!0},{key:"subname",fn:function(){return[t._v("\n\t\t\t\t\t\t\t"+t._s(r.subline)+"\n\t\t\t\t\t\t")]},proxy:!0}],null,!0)})})),1),t._v(" "),e("div",{staticClass:"result-footer"},[e("NcButton",{attrs:{type:"tertiary-no-background"},on:{click:function(e){return t.loadMoreResultsForProvider(r.id)}},scopedSlots:t._u([{key:"icon",fn:function(){return[e("DotsHorizontalIcon",{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\tLoad more results\n\t\t\t\t\t\t")]),t._v(" "),e("NcButton",{attrs:{alignment:"end-reverse",type:"tertiary-no-background"},scopedSlots:t._u([{key:"icon",fn:function(){return[e("ArrowRight",{attrs:{size:20}})]},proxy:!0}],null,!0)},[t._v("\n\t\t\t\t\t\tSearch in "+t._s(r.provider)+"\n\t\t\t\t\t\t")])],1)])])}))],2)],1):t._e()}),[],!1,null,"73c58049",null).exports;var st=i(25108);const lt={name:"GlobalSearch",components:{NcButton:o.Z,Magnify:c.default,GlobalSearchModal:at},data:()=>({showGlobalSearch:!1}),mounted(){st.debug("Global search initialized!")},methods:{toggleGlobalSearch(){this.showGlobalSearch=!this.showGlobalSearch}}};var ot=i(44557),ct={};ct.styleTagTransform=D(),ct.setAttributes=I(),ct.insert=k().bind(null,"head"),ct.domAPI=y(),ct.insertStyleElement=S(),b()(ot.Z,ct),ot.Z&&ot.Z.locals&&ot.Z.locals;const dt=(0,u.Z)(lt,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"header-menu"},[e("NcButton",{staticClass:"global-search__button",attrs:{"aria-label":t.t("core","Global search")},on:{click:t.toggleGlobalSearch},scopedSlots:t._u([{key:"icon",fn:function(){return[e("Magnify",{staticClass:"global-search__trigger",attrs:{size:22}})]},proxy:!0}])}),t._v(" "),e("GlobalSearchModal",{class:"global-search-modal",attrs:{"is-visible":t.showGlobalSearch}})],1)}),[],!1,null,"a0c987cc",null).exports;i.nc=btoa((0,a.IH)());const At=(0,n.IY)().setApp("global-search").detectUser().build();l.default.mixin({data:()=>({logger:At}),methods:{t:s.Iu,n:s.uN}}),new l.default({el:"#global-search",name:"GlobalSearchRoot",render:t=>t(dt)})},15094:(t,e,r)=>{r.d(e,{Z:()=>l});var i=r(87537),n=r.n(i),a=r(23645),s=r.n(a)()(n());s.push([t.id,".global-search-custom-date-modal[data-v-0afd0926]{padding:10px 20px 10px 20px}.global-search-custom-date-modal h1[data-v-0afd0926]{font-size:16px;font-weight:bolder;line-height:2em}.global-search-custom-date-modal__pickers[data-v-0afd0926]{display:flex;flex-direction:column}","",{version:3,sources:["webpack://./core/src/components/GlobalSearch/CustomDateRangeModal.vue"],names:[],mappings:"AACA,kDACC,2BAAA,CAEA,qDACC,cAAA,CACA,kBAAA,CACA,eAAA,CAGD,2DACC,YAAA,CACA,qBAAA",sourcesContent:["\n.global-search-custom-date-modal {\n\tpadding: 10px 20px 10px 20px;\n\n\th1 {\n\t\tfont-size: 16px;\n\t\tfont-weight: bolder;\n\t\tline-height: 2em;\n\t}\n\n\t&__pickers {\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t}\n\n}\n"],sourceRoot:""}]);const l=s},1233:(t,e,r)=>{r.d(e,{Z:()=>l});var i=r(87537),n=r.n(i),a=r(23645),s=r.n(a)()(n());s.push([t.id,".chip[data-v-4932c3f9]{display:flex;align-items:center;padding:2px 4px;border:1px solid var(--color-primary-element-light);border-radius:20px;background-color:var(--color-primary-element-light);margin:2px;font-size:10px;font-weight:bolder}.chip .icon[data-v-4932c3f9]{display:flex;align-items:center;padding-right:5px;filter:grayscale(100%) invert(100%)}.chip .icon img[data-v-4932c3f9]{width:20px;padding:2px;border-radius:20px}.chip .text[data-v-4932c3f9]{margin:0 2px}.chip .close-icon[data-v-4932c3f9]{cursor:pointer}.chip .close-icon[data-v-4932c3f9] :hover{border-radius:4px;padding:1px}","",{version:3,sources:["webpack://./core/src/components/GlobalSearch/SearchFilterChip.vue"],names:[],mappings:"AACA,uBACI,YAAA,CACA,kBAAA,CACA,eAAA,CACA,mDAAA,CACA,kBAAA,CACA,mDAAA,CACA,UAAA,CACA,cAAA,CACA,kBAAA,CAEA,6BACI,YAAA,CACA,kBAAA,CACA,iBAAA,CACA,mCAAA,CAEA,iCACI,UAAA,CACA,WAAA,CACA,kBAAA,CAIR,6BACI,YAAA,CAGJ,mCACI,cAAA,CAEA,0CACI,iBAAA,CACA,WAAA",sourcesContent:["\n.chip {\n    display: flex;\n    align-items: center;\n    padding: 2px 4px;\n    border: 1px solid var(--color-primary-element-light);\n    border-radius: 20px;\n    background-color: var(--color-primary-element-light);\n    margin: 2px;\n    font-size: 10px;\n    font-weight: bolder;\n\n    .icon {\n        display: flex;\n        align-items: center;\n        padding-right: 5px;\n        filter: grayscale(100%) invert(100%);\n\n        img {\n            width: 20px;\n            padding: 2px;\n            border-radius: 20px;\n        }\n    }\n\n    .text {\n        margin: 0 2px;\n    }\n\n    .close-icon {\n        cursor: pointer;\n\n        :hover {\n            border-radius: 4px;\n            padding: 1px;\n        }\n    }\n}\n"],sourceRoot:""}]);const l=s},44557:(t,e,r)=>{r.d(e,{Z:()=>l});var i=r(87537),n=r.n(i),a=r(23645),s=r.n(a)()(n());s.push([t.id,".header-menu[data-v-a0c987cc]{display:flex;align-items:center;justify-content:center}.header-menu .global-search__button[data-v-a0c987cc]{display:flex;align-items:center;justify-content:center;width:var(--header-height);margin:0;padding:0;cursor:pointer;opacity:.85;background-color:rgba(0,0,0,0);border:none;filter:none !important;color:var(--color-primary-text) !important}.header-menu .global-search__button[data-v-a0c987cc]:hover{background-color:rgba(0,0,0,0) !important}.global-search-modal[data-v-a0c987cc] .modal-container{height:80%}","",{version:3,sources:["webpack://./core/src/views/GlobalSearch.vue"],names:[],mappings:"AACA,8BACC,YAAA,CACA,kBAAA,CACA,sBAAA,CAEA,qDACC,YAAA,CACA,kBAAA,CACA,sBAAA,CACA,0BAAA,CAEA,QAAA,CACA,SAAA,CACA,cAAA,CACA,WAAA,CACA,8BAAA,CACA,WAAA,CACA,sBAAA,CACA,0CAAA,CAEA,2DACC,yCAAA,CAMF,uDACC,UAAA",sourcesContent:["\n.header-menu {\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n\t.global-search__button {\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\tjustify-content: center;\n\t\twidth: var(--header-height);\n\t\t// height: var(--header-height);\n\t\tmargin: 0;\n\t\tpadding: 0;\n\t\tcursor: pointer;\n\t\topacity: .85;\n\t\tbackground-color: transparent;\n\t\tborder: none;\n\t\tfilter: none !important;\n\t\tcolor: var(--color-primary-text) !important;\n\n\t\t&:hover {\n\t\t\tbackground-color: transparent !important;\n\t\t}\n\t}\n}\n\n.global-search-modal {\n\t::v-deep .modal-container {\n\t\theight: 80%;\n\t}\n}\n"],sourceRoot:""}]);const l=s},46976:(t,e,r)=>{r.d(e,{Z:()=>l});var i=r(87537),n=r.n(i),a=r(23645),s=r.n(a)()(n());s.push([t.id,".global-search-modal[data-v-73c58049]{padding:10px 20px 10px 20px;height:60%}.global-search-modal h1[data-v-73c58049]{font-size:16px;font-weight:bolder;line-height:2em}.global-search-modal__filters[data-v-73c58049]{display:flex;padding-top:5px;align-items:center;justify-content:space-between}.global-search-modal__filters[data-v-73c58049] div.v-select{min-width:0}.global-search-modal__filters[data-v-73c58049] div.v-select div.vs__dropdown-toggle{height:44px}.global-search-modal__filters[data-v-73c58049]>*{min-width:auto;min-height:0;display:flex;align-items:center;flex:1}.global-search-modal__filters[data-v-73c58049]>*>*{flex:1;min-width:auto;min-height:0}.global-search-modal__filters[data-v-73c58049]>*:not(:last-child){margin:0 2px}.global-search-modal__filters-applied[data-v-73c58049]{display:flex;flex-wrap:wrap}.global-search-modal__results[data-v-73c58049]{padding:10px}.global-search-modal__results .results .result-title span[data-v-73c58049]{color:var(--color-primary-element);font-weight:bolder;font-size:16px}[data-v-73c58049] .global-search-modal__results .results .result-items__item a{border-radius:12px;border:2px solid rgba(0,0,0,0);border-radius:var(--border-radius-large) !important}[data-v-73c58049] .global-search-modal__results .results .result-items__item a--focused{background-color:var(--color-background-hover)}[data-v-73c58049] .global-search-modal__results .results .result-items__item a:active,[data-v-73c58049] .global-search-modal__results .results .result-items__item a:hover,[data-v-73c58049] .global-search-modal__results .results .result-items__item a:focus{background-color:var(--color-background-hover);border:2px solid var(--color-border-maxcontrast)}[data-v-73c58049] .global-search-modal__results .results .result-items__item a *{cursor:pointer}[data-v-73c58049] .global-search-modal__results .results .result-items__item-icon{overflow:hidden;width:44px;height:44px;border-radius:var(--border-radius);background-repeat:no-repeat;background-position:center center;background-size:32px}[data-v-73c58049] .global-search-modal__results .results .result-items__item-icon--rounded{border-radius:22px}[data-v-73c58049] .global-search-modal__results .results .result-items__item-icon--no-preview{background-size:32px}[data-v-73c58049] .global-search-modal__results .results .result-items__item-icon--with-thumbnail{background-size:cover}[data-v-73c58049] .global-search-modal__results .results .result-items__item-icon--with-thumbnail:not(::v-deep .global-search-modal__results .results .result-items__item-icon--rounded){max-width:42px;max-height:42px;border:1px solid var(--color-border)}[data-v-73c58049] .global-search-modal__results .results .result-items__item-icon img{width:100%;height:100%;object-fit:cover;object-position:center}.global-search-modal__results .results .result-footer[data-v-73c58049]{justify-content:space-between;align-items:center;display:flex}div.v-popper__wrapper ul li[data-v-73c58049] button.action-button{align-items:center !important}div.v-popper__wrapper ul li[data-v-73c58049] button.action-button img{width:24px;margin:0 4px;filter:grayscale(100%)}","",{version:3,sources:["webpack://./core/src/views/GlobalSearchModal.vue"],names:[],mappings:"AAKA,sCACC,2BAAA,CACA,UAAA,CAEA,yCACC,cAAA,CACA,kBAAA,CACA,eAAA,CAGD,+CACC,YAAA,CACA,eAAA,CACA,kBAAA,CACA,6BAAA,CAGA,4DACC,WAAA,CAEA,oFACC,WAAA,CAIF,iDACC,cAAA,CAEA,YAAA,CAEA,YAAA,CACA,kBAAA,CACA,MAAA,CAEA,mDACC,MAAA,CACA,cAAA,CAEA,YAAA,CAKF,kEACC,YAAA,CAIF,uDACC,YAAA,CACA,cAAA,CAGD,+CACC,YAAA,CAKE,2EACC,kCAAA,CACA,kBAAA,CACA,cAAA,CAMA,+EACC,kBAAA,CACA,8BAAA,CACA,mDAAA,CAEA,wFACC,8CAAA,CAGD,gQAGC,8CAAA,CACA,gDAAA,CAGD,iFACC,cAAA,CAKF,kFACC,eAAA,CACA,UA/FW,CAgGX,WAhGW,CAiGX,kCAAA,CACA,2BAAA,CACA,iCAAA,CACA,oBAAA,CAEA,2FACC,kBAAA,CAGD,8FACC,oBAAA,CAGD,kGACC,qBAAA,CAGD,yLAEC,cAAA,CACA,eAAA,CACA,oCAAA,CAGD,sFAEC,UAAA,CACA,WAAA,CAEA,gBAAA,CACA,sBAAA,CAOJ,uEACC,6BAAA,CACA,kBAAA,CACA,YAAA,CAUD,kEACC,6BAAA,CAEA,sEACC,UAAA,CACA,YAAA,CAEA,sBAAA",sourcesContent:['\n@use "sass:math";\n$clickable-area: 44px;\n$margin: 10px;\n\n.global-search-modal {\n\tpadding: 10px 20px 10px 20px;\n\theight: 60%;\n\n\th1 {\n\t\tfont-size: 16px;\n\t\tfont-weight: bolder;\n\t\tline-height: 2em;\n\t}\n\n\t&__filters {\n\t\tdisplay: flex;\n\t\tpadding-top: 5px;\n\t\talign-items: center;\n\t\tjustify-content: space-between;\n\n\t\t/* Overwrite NcSelect styles */\n\t\t::v-deep div.v-select {\n\t\t\tmin-width: 0; // reset NcSelect min width\n\n\t\t\tdiv.vs__dropdown-toggle {\n\t\t\t\theight: 44px; // Overwrite height of NcSelect component to match button\n\t\t\t}\n\t\t}\n\n\t\t::v-deep>* {\n\t\t\tmin-width: auto;\n\t\t\t/* Reset hard set min widths */\n\t\t\tmin-height: 0;\n\t\t\t/* Reset any min heights */\n\t\t\tdisplay: flex;\n\t\t\talign-items: center;\n\t\t\tflex: 1;\n\n\t\t\t>* {\n\t\t\t\tflex: 1;\n\t\t\t\tmin-width: auto;\n\t\t\t\t/* Reset hard set min widths */\n\t\t\t\tmin-height: 0;\n\t\t\t}\n\n\t\t}\n\n\t\t::v-deep>*:not(:last-child) {\n\t\t\tmargin: 0 2px;\n\t\t}\n\t}\n\n\t&__filters-applied {\n\t\tdisplay: flex;\n\t\tflex-wrap: wrap;\n\t}\n\n\t&__results {\n\t\tpadding: 10px;\n\n\t\t.results {\n\n\t\t\t.result-title {\n\t\t\t\tspan {\n\t\t\t\t\tcolor: var(--color-primary-element);\n\t\t\t\t\tfont-weight: bolder;\n\t\t\t\t\tfont-size: 16px;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.result-items {\n\t\t\t\t::v-deep &__item {\n\t\t\t\t\ta {\n\t\t\t\t\t\tborder-radius: 12px;\n\t\t\t\t\t\tborder: 2px solid transparent;\n\t\t\t\t\t\tborder-radius: var(--border-radius-large) !important;\n\n\t\t\t\t\t\t&--focused {\n\t\t\t\t\t\t\tbackground-color: var(--color-background-hover);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t&:active,\n\t\t\t\t\t\t&:hover,\n\t\t\t\t\t\t&:focus {\n\t\t\t\t\t\t\tbackground-color: var(--color-background-hover);\n\t\t\t\t\t\t\tborder: 2px solid var(--color-border-maxcontrast);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t* {\n\t\t\t\t\t\t\tcursor: pointer;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\t&-icon {\n\t\t\t\t\t\toverflow: hidden;\n\t\t\t\t\t\twidth: $clickable-area;\n\t\t\t\t\t\theight: $clickable-area;\n\t\t\t\t\t\tborder-radius: var(--border-radius);\n\t\t\t\t\t\tbackground-repeat: no-repeat;\n\t\t\t\t\t\tbackground-position: center center;\n\t\t\t\t\t\tbackground-size: 32px;\n\n\t\t\t\t\t\t&--rounded {\n\t\t\t\t\t\t\tborder-radius: math.div($clickable-area, 2);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t&--no-preview {\n\t\t\t\t\t\t\tbackground-size: 32px;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t&--with-thumbnail {\n\t\t\t\t\t\t\tbackground-size: cover;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t&--with-thumbnail:not(&--rounded) {\n\t\t\t\t\t\t\t// compensate for border\n\t\t\t\t\t\t\tmax-width: $clickable-area - 2px;\n\t\t\t\t\t\t\tmax-height: $clickable-area - 2px;\n\t\t\t\t\t\t\tborder: 1px solid var(--color-border);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\timg {\n\t\t\t\t\t\t\t// Make sure to keep ratio\n\t\t\t\t\t\t\twidth: 100%;\n\t\t\t\t\t\t\theight: 100%;\n\n\t\t\t\t\t\t\tobject-fit: cover;\n\t\t\t\t\t\t\tobject-position: center;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t.result-footer {\n\t\t\t\tjustify-content: space-between;\n\t\t\t\talign-items: center;\n\t\t\t\tdisplay: flex;\n\t\t\t}\n\t\t}\n\n\t}\n}\n\ndiv.v-popper__wrapper {\n\tul {\n\t\tli {\n\t\t\t::v-deep button.action-button {\n\t\t\t\talign-items: center !important;\n\n\t\t\t\timg {\n\t\t\t\t\twidth: 24px;\n\t\t\t\t\tmargin: 0 4px;\n\t\t\t\t\t// filter: invert(100%) grayscale(1) contrast(100) brightness(1);\n\t\t\t\t\tfilter: grayscale(100%);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n}\n'],sourceRoot:""}]);const l=s},42761:t=>{t.exports="data:image/svg+xml;base64,PCEtLSBUaGlzIGljb24gaXMgcGFydCBvZiBNYXRlcmlhbCBVSSBJY29ucy4gQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4sIEFwYWNoZS0yLjAgTGljZW5zZSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZD0iTS00LTRoMjR2MjRILTRWLTR6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTggMEMzLjYgMCAwIDMuNiAwIDhzMy42IDggOCA4IDgtMy42IDgtOC0zLjYtOC04LTh6IiBmaWxsPSIjZWQ0ODRjIi8+PHBhdGggZD0iTTUgNi41aDZjLjggMCAxLjUuNyAxLjUgMS41cy0uNyAxLjUtMS41IDEuNUg1Yy0uOCAwLTEuNS0uNy0xLjUtMS41UzQuMiA2LjUgNSA2LjV6IiBmaWxsPSIjZmRmZmZmIi8+PC9zdmc+Cg=="},87210:t=>{t.exports="data:image/svg+xml;base64,PCEtLSBUaGlzIGljb24gaXMgcGFydCBvZiBNYXRlcmlhbCBVSSBJY29ucy4gQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4sIEFwYWNoZS0yLjAgTGljZW5zZSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZD0iTTQuOCAxMS4yaDYuNFY0LjhINC44djYuNHpNOCAwQzMuNiAwIDAgMy42IDAgOHMzLjYgOCA4IDggOC0zLjYgOC04LTMuNi04LTgtOHoiIGZpbGw9IiM0OWIzODIiLz48L3N2Zz4K"},94659:t=>{t.exports="data:image/svg+xml;base64,PCEtLSBUaGlzIGljb24gaXMgcGFydCBvZiBNYXRlcmlhbCBVSSBJY29ucy4gQ29weXJpZ2h0IDIwMjAgR29vZ2xlIEluYy4sIEFwYWNoZS0yLjAgTGljZW5zZSAtLT4KPHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCAxNiAxNiI+PHBhdGggZmlsbD0ibm9uZSIgZD0iTS00LTRoMjR2MjRILTR6Ii8+PHBhdGggZD0iTTYuOS4xQzMgLjYtLjEgNC0uMSA4YzAgNC40IDMuNiA4IDggOCA0IDAgNy40LTMgOC02LjktMS4yIDEuMy0yLjkgMi4xLTQuNyAyLjEtMy41IDAtNi40LTIuOS02LjQtNi40IDAtMS45LjgtMy42IDIuMS00Ljd6IiBmaWxsPSIjZjRhMzMxIi8+PC9zdmc+Cg=="}},i={};function n(t){var e=i[t];if(void 0!==e)return e.exports;var a=i[t]={id:t,loaded:!1,exports:{}};return r[t].call(a.exports,a,a.exports,n),a.loaded=!0,a.exports}n.m=r,e=[],n.O=(t,r,i,a)=>{if(!r){var s=1/0;for(d=0;d<e.length;d++){r=e[d][0],i=e[d][1],a=e[d][2];for(var l=!0,o=0;o<r.length;o++)(!1&a||s>=a)&&Object.keys(n.O).every((t=>n.O[t](r[o])))?r.splice(o--,1):(l=!1,a<s&&(s=a));if(l){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[r,i,a]},n.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return n.d(e,{a:e}),e},n.d=(t,e)=>{for(var r in e)n.o(e,r)&&!n.o(t,r)&&Object.defineProperty(t,r,{enumerable:!0,get:e[r]})},n.e=()=>Promise.resolve(),n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),n.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),n.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),n.j=6828,(()=>{n.b=document.baseURI||self.location.href;var t={6828:0};n.O.j=e=>0===t[e];var e=(e,r)=>{var i,a,s=r[0],l=r[1],o=r[2],c=0;if(s.some((e=>0!==t[e]))){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(o)var d=o(n)}for(e&&e(r);c<s.length;c++)a=s[c],n.o(t,a)&&t[a]&&t[a][0](),t[a]=0;return n.O(d)},r=self.webpackChunknextcloud=self.webpackChunknextcloud||[];r.forEach(e.bind(null,0)),r.push=e.bind(null,r.push.bind(r))})(),n.nc=void 0;var a=n.O(void 0,[7874],(()=>n(37139)));a=n.O(a)})();
//# sourceMappingURL=core-global-search.js.map?v=ce43991fd76a432ec18c